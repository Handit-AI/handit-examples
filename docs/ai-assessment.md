# Your AI Review by Handit.ai

## 1) Scorecard

| Criterion                  | System Prompt | User Prompt |
|----------------------------|---------------|-------------|
| Context & Rationale (0â€“5)  | 4             | 3           |
| Format/Output Contract     | 5             | 5           |
| Examples & Edge Cases      | 2             | 2           |
| Determinism & Guardrails   | 4             | 3           |
| Testability                | 3             | 3           |

**Overall Risk:** ðŸ”¶ Medium (both prompts)

## 2) Risk Heatmap (top issues)

- **Lack of examples and edge case handling** â†’ May lead to inconsistent outputs (**ðŸ”¶ Medium**)
- **Limited testability due to lack of explicit verification steps** â†’ Potential for undetected errors (**ðŸ”¶ Medium**)

## 3) Findings & Improvements

### A. Prompt: System Prompt

#### Original

```
You are a robust multimodal (vision + text) document-to-schema mapping system. Given an inferred schema and a document (image/pdf/text), analyze layout and visual structure first, then map fields strictly...
```

#### Risks

- Absence of examples or edge cases may lead to misinterpretation.
- Limited guidance on handling ambiguous or complex document layouts.
- Potential for inconsistent outputs without explicit verification steps.

#### Improvements

- Incorporate examples to illustrate desired behaviors (Best Practice 3).
- Include explicit verification steps to enhance testability (Best Practice 13).
- Provide guidance for handling complex or ambiguous layouts (Best Practice 4).

#### Evidence
The prompt effectively assigns a role and specifies output format, but lacks examples and explicit verification steps.  
â†’ Potential production impact includes inconsistent field mapping and undetected errors.

### B. Prompt: User Prompt

#### Original

```
Schema (JSON): {schema_json} Map the following document to the schema. Keep the schema's section/field names. For each field output an object: {"value": <any|null>, "normalized_value": <any|null>, "reason": <string>, "confidence": <number optional>}...
```

#### Risks

- Lack of examples or edge cases for schema mapping.
- Limited guidance on handling multilingual or complex data.
- Absence of explicit verification or validation steps.

#### Improvements

- Add examples to demonstrate schema mapping (Best Practice 3).
- Include steps for verification and validation of outputs (Best Practice 13).
- Provide guidance for handling multilingual data (Best Practice 4).

#### Evidence
The prompt specifies a clear output format but lacks examples and explicit verification, which could lead to inconsistent results.  
â†’ Potential production impact includes errors in data normalization and schema mapping.

## 4) Next Steps (with handit)

1. **Connect handit** (1-line setup)
2. **Run baseline evals** on your real logs: Evaluate schema mapping accuracy and consistency
3. **handit will experiment** with improvements automatically
4. **If a candidate passes** tests on your real data, handit opens the PR

## 5) Business Impact

- **Improved data extraction accuracy**: By incorporating examples and verification steps, the system can achieve more consistent and reliable outputs.
- **Enhanced error detection**: Explicit verification steps will help identify and correct errors early, reducing downstream impacts.
- **Better handling of complex documents**: Guidance for complex layouts and multilingual data will improve the system's robustness and applicability.

---

*This PR was automatically generated by handit.ai Autonomous engineer*